<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aquatic Ecosystems</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            /* Add some padding to the body so the fixed header doesn't cover the content */
            padding-top: 5rem;
        }
        .highlight {
            background-color: #fde047; /* yellow-200 */
        }
        .modal {
            display: none;
        }
        /* Custom styling for table rows */
        .striped-table tbody tr:nth-child(even) {
            background-color: #f9fafb; /* gray-50 */
        }
    </style>
</head>
<body class="bg-sky-50 flex flex-col min-h-screen items-center justify-center p-4 sm:p-6 md:p-8">

    <!-- Sticky Header/Banner -->
    <header id="main-header" class="fixed top-0 left-0 right-0 z-50 bg-slate-800 text-white shadow-xl py-2 px-4 flex items-center justify-between rounded-b-lg">
        <!-- Home Button -->
        <a href="index.html" class="inline-block bg-slate-600 hover:bg-slate-700 text-white font-semibold py-2 px-4 rounded-lg shadow transition-colors">
            Home
        </a>

        <!-- Search Feature -->
        <div class="flex items-center space-x-2">
            <input type="text" id="search-input" placeholder="Search this page..." class="rounded-lg p-2 text-slate-800 focus:outline-none focus:ring-2 focus:ring-cyan-500 w-full max-w-sm">
            <button id="search-button" class="bg-cyan-600 hover:bg-cyan-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
                </svg>
            </button>
        </div>
    </header>

    <div id="content-area" class="bg-white rounded-xl shadow-lg p-8 md:p-12 w-full max-w-4xl text-left">
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-sky-800 border-b-4 border-cyan-500 pb-2">Types of Aquatic Ecosystems</h1>
            <p class="text-lg text-slate-500 mt-2">Freshwater, Marine, and Estuaries</p>
        </header>

        <div class="text-content">
            <section class="mb-8">
                <h2 id="introduction" class="text-2xl font-semibold text-cyan-700">Introduction</h2>
                <p class="mt-2 text-slate-700">Water is more than a simple compound; it is the very foundation of aquatic ecosystems. Aquatic organisms, from microscopic algae to large fish, have evolved to live within this medium, relying on its unique properties for survival. The distinction between <b>freshwater</b> and <b>marine</b> habitats, based primarily on salinity, creates vastly different environments that support unique communities of life.</p>
            </section>

            <section class="mb-8">
                <h2 id="freshwater-ecosystems" class="text-2xl font-semibold text-cyan-700">Section 2.1: Freshwater Ecosystems</h2>
                <p class="mt-2 text-slate-700">These ecosystems are characterized by their low salt concentration (typically less than 1%) and can be divided into two main categories: <b>lentic</b> (standing water) and <b>lotic</b> (flowing water). For a visual overview, you can watch this video: <a href="https://www.youtube.com/watch?v=SexLZIyo_FA" class="text-blue-600 hover:text-blue-800 underline" target="_blank">Types of Freshwater Ecosystems</a>.</p>
                <div class="flex justify-center my-6 w-full">
                    <iframe class="rounded-lg shadow-md w-full max-w-3xl aspect-video" src="https://www.youtube.com/embed/SexLZIyo_FA" title="Types of Freshwater Ecosystems" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                </div>
                <ul class="list-disc list-inside mt-2 space-y-2">
                    <li>
                        <b>Lakes & Ponds:</b> As lentic systems, these are bodies of still water. Their characteristics vary greatly by depth and light penetration, creating distinct zones.
                        <div class="flex justify-center my-6">
                            <img src="https://kascomarine.com/wp-content/uploads/C9_fig_9.3-aquatic-science-texas.jpg" alt="Diagram illustrating the different zones of a lake, including littoral, limnetic, and profundal zones." class="rounded-lg shadow-md max-w-full h-auto w-3/4">
                        </div>
                        <p class="text-center italic text-slate-500 mt-2">A conceptual diagram of the different zones of a lake, showing the littoral, limnetic, and profundal zones, as well as thermal stratification.</p>
                        
                        <p class="mt-4 text-slate-700">Lakes and ponds are often stratified into distinct layers based on a combination of light penetration and temperature, a process that greatly influences the types of organisms that can live in each zone.</p>
                        
                        <h4 id="light-zones" class="text-md font-bold text-slate-700 mt-4 ml-4">Light Zones</h4>
                        <p class="mt-2 text-slate-700 ml-4">The availability of sunlight creates three primary zones based on how deeply light can penetrate the water column. The amount of light directly impacts the rate of photosynthesis and, consequently, the amount of dissolved oxygen available to aquatic life.</p>
                        <ul class="list-disc list-inside ml-4 space-y-1">
                            <li>The <b>littoral zone</b> is the shallow area near the shore. It is often the most productive part of the lake, as sunlight reaches the bottom, allowing rooted aquatic plants and algae to thrive. This abundant plant life provides food and habitat for a wide variety of invertebrates, fish, and amphibians.</li>
                            <li>The <b>limnetic zone</b> is the well-lit, open-water surface layer that extends as far down as sunlight can penetrate. It is dominated by floating organisms like phytoplankton, which form the base of the food web and produce a significant amount of the oxygen in the lake. Fish that prefer open water, such as trout and perch, are commonly found here.</li>
                            <li>The <b>profundal zone</b> is the deep, dark, and cold area below the limnetic zone where little to no light can reach. Due to the lack of light, photosynthesis cannot occur. The organisms in this zone, such as fungi, bacteria, and specific types of fish, rely on decomposing organic matter that sinks from the zones above for their energy and nutrients.</li>
                        </ul>
                        
                        <h4 id="temperature-zones" class="text-md font-bold text-slate-700 mt-4 ml-4">Temperature Zones (Thermal Stratification)</h4>
                        <p class="mt-2 text-slate-700 ml-4">During summer months, lakes with sufficient depth often form three distinct temperature layers, a process known as thermal stratification. This is due to water's unique property where its density changes with temperature, preventing mixing between the layers.</p>
                        <ul class="list-disc list-inside ml-4 space-y-1">
                            <li>The <b>epilimnion</b> is the warm, sunlit, and well-mixed surface layer. It has the highest concentration of dissolved oxygen due to contact with the atmosphere and photosynthesis by algae. This is where most recreational activities occur, and it is a rich habitat for many fish and other aquatic animals.</li>
                            <li>The <b>metalimnion</b> (or thermocline) is the middle layer, characterized by a sharp and rapid drop in temperature. This sudden change in temperature creates a density barrier that separates the upper and lower layers of the lake, preventing the transfer of nutrients and oxygen between them.</li>
                            <li>The <b>hypolimnion</b> is the deepest and coldest layer of water. It remains at a consistently low temperature, typically around 4Â°C. This layer receives little to no sunlight, and oxygen levels are often low due to a lack of photosynthesis and the decomposition of organic matter.</li>
                        </ul>
                    </li>
                    <li>
                        <b>Rivers & Streams:</b> As lotic systems, these are defined by their flowing water. The constant movement of the water creates higher concentrations of dissolved oxygen, supporting different species than those found in standing water. The characteristics of a river change from its source to its mouth, creating three distinct zones.
                        <h4 id="river-continuum-concept" class="text-md font-bold text-slate-700 mt-4">The River Continuum Concept</h4>
                        <p class="mt-2 text-slate-700">Ecologists often describe rivers and streams in terms of a "continuum," where the physical and biological characteristics change progressively from the source to the mouth. This can be simplified into three primary zones, each with its own unique habitat.</p>
                        <ul class="list-disc list-inside ml-4 space-y-1">
                            <li>The <b>Source Zone</b> is typically the narrow, fast-flowing headwater stream located at a high elevation. The water is cold, clear, and highly oxygenated due to its rapid movement and turbulence. These areas have low nutrient levels and are primarily fed by melting snow or groundwater. Organisms here are specialized for high-flow environments, such as algae that cling to rocks and fish like trout that are adapted to cold, fast-moving water.</li>
                            <li>The <b>Transitional Zone</b> is found at a lower elevation where the stream widens and the gradient lessens. The water flow slows, it becomes warmer, and turbidity (cloudiness) increases as it picks up sediment. This zone supports a greater diversity of aquatic life, including a mix of cold-water and warm-water fish species, along with a variety of aquatic insects and submerged plants.</li>
                            <li>The <b>Floodplain Zone</b> is the broad, slow-moving lower stretch of the river, often located at the lowest elevation before the river meets a larger body of water. The water is warmer, more turbid, and nutrient-rich. Dissolved oxygen levels can be lower here, making it a suitable habitat for warm-water fish like catfish and carp. The river's path may meander, and its wide floodplains support diverse wetland ecosystems.</li>
                        </ul>
                        <div class="flex justify-center my-6">
                            <img src="https://minnstate.pressbooks.pub/app/uploads/sites/87/2023/12/river-zones-768x558.png" alt="A diagram illustrating the three zones of the River Continuum Concept: Source, Transitional, and Floodplain zones." class="rounded-lg shadow-md max-w-full h-auto w-3/4">
                        </div>
                        <p class="text-center italic text-slate-500 mt-2">A conceptual diagram of the River Continuum Concept, showing changes from the source to the floodplain zone.</p>
                    </li>
                    <li>
                        <b>Wetlands:</b> These are areas of land saturated with water for at least part of the year. They are among the most biologically diverse and productive ecosystems on Earth. Their unique hydric soils (water-logged) and specific plant communities distinguish them from other habitats. Wetlands play a crucial role in water purification, flood control, and as critical habitats for a vast number of species.
                        <div class="ml-4">
                            <h4 id="types-of-wetlands" class="text-md font-bold text-slate-700 mt-4">Types of Wetlands</h4>
                            <p class="mt-2 text-slate-700">Wetlands are classified into several types based on their water source, vegetation, and soil characteristics.</p>
                            <ul class="list-disc list-inside ml-4 space-y-1">
                                <li><b>Marshes</b> are characterized by herbaceous, non-woody plants like grasses, reeds, and sedges. They are typically found along the edges of lakes and rivers, receiving nutrients from surface water flow. Marshes are excellent natural filters, trapping pollutants and improving water quality.</li>
                                <li><b>Swamps</b> are forested wetlands dominated by woody plants such as trees and shrubs. They often occur in low-lying areas with slow-moving water, like river floodplains. Swamps are essential for flood control, as their dense vegetation can absorb large amounts of excess water.</li>
                                <li><b>Bogs</b> are freshwater wetlands characterized by acidic, nutrient-poor conditions. Their primary water source is precipitation, not groundwater or runoff. Bogs are known for their thick layers of sphagnum moss and decaying plant matter (peat). The low oxygen and high acidity of bogs prevent decomposition, making them unique carbon sinks.</li>
                                <li><b>Fens</b> are similar to bogs but receive water and nutrients from groundwater and surface runoff, making them less acidic and more biologically diverse. They are typically dominated by grasses, sedges, and wildflowers. Fens are also known for their ability to store carbon and support a unique collection of plant and animal species.</li>
                            </ul>
                        </div>
                        <div class="flex justify-center my-6">
                            <img src="https://worldrivers.net/wp-content/uploads/2025/06/wetland-types-1-1024x683.jpg" alt="A diagram illustrating the different types of wetlands including a marsh, a swamp, a bog, and a fen." class="rounded-lg shadow-md max-w-full h-auto w-3/4">
                        </div>
                        <p class="text-center italic text-slate-500 mt-2">A visual representation of the four main types of freshwater wetlands.</p>
                    </li>
                </ul>
            </section>
            
            <div class="flex justify-center mb-8">
                <button id="quiz-button" class="bg-cyan-600 hover:bg-cyan-700 text-white font-semibold py-3 px-6 rounded-lg shadow-lg transition-transform transform hover:scale-105 active:scale-95">
                    Start the Freshwater Ecosystems Quiz!
                </button>
            </div>
            
            <section class="mb-8">
                <h2 id="marine-ecosystems" class="text-2xl font-semibold text-cyan-700">Section 2.2: Marine Ecosystems</h2>
                <p class="mt-2 text-slate-700">Covering over 70% of our planet, marine ecosystems are vast and filled with salt. They're not just home to a huge diversity of life, but they also play a massive role in regulating our climate and producing a lot of the oxygen we breathe.</p>
                <p class="mt-2 text-slate-700">Marine organisms are categorized into three main groups based on how they move and where they live in the water column: <b>plankton</b>, <b>nekton</b>, and <b>benthos</b>. Think of them as the drifters, the swimmers, and the bottom-dwellers.</p>
                <div class="flex justify-center my-6">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e9/Oceanic_Food_Web.jpg/1024px-Oceanic_Food_Web.jpg" alt="A diagram illustrating the complex food web in an oceanic ecosystem." class="rounded-lg shadow-md max-w-full h-auto w-3/4">
                </div>
                <ul class="list-disc list-inside mt-2 space-y-2">
                    <li><b>Plankton:</b> These tiny organisms can't swim against the current, so they're passive drifters, forming the base of the entire marine food web. <b>Phytoplankton</b> are like microscopic plants that perform photosynthesis, while <b>zooplankton</b> are tiny animals that feed on them.</li>
                    <li><b>Nekton:</b> This group includes all the free-swimming animals that can move on their own, like fish, whales, dolphins, seals, and squid. They can be found in the open ocean and closer to shore.</li>
                    <li><b>Benthos:</b> These are the organisms that live on or in the seafloor, from shallow coastal zones all the way down to the deepest parts of the ocean. This group includes crabs, clams, sea stars, lobsters, and deep-sea worms.
                        <div class="flex justify-center my-6 w-full">
                            <iframe class="rounded-lg shadow-md w-full max-w-3xl aspect-video" src="https://www.youtube.com/embed/4cguoY4qTXA" title="What are Plankton, Nekton & Benthos?" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                        </div>
                    </li>
                </ul>
                
                <p class="mt-2 text-slate-700"><b>Oceans & Open Ocean:</b> The open ocean, or <i>pelagic zone</i>, is a massive space divided into vertical layers based on depth and light. The top layer is the <i>epipelagic zone</i>, where sunlight keeps things bright and photosynthesis humming. Below that, things get dark and cold, with zones like the <i>mesopelagic</i> (twilight) and <i>abyssopelagic</i> (abyss). Life down here is adapted to crushing pressure and a world without light, often using bioluminescence to survive.</p>
                <div class="bg-sky-100 rounded-lg p-4 mt-4 shadow-inner">
                    <h4 class="text-lg font-bold text-sky-800">ðŸ’¡ Did you know?</h4>
                    <p class="mt-2 text-slate-700">Many deep-sea creatures, from glowing jellyfish to anglerfish, create their own light through a chemical reaction called <b>bioluminescence</b>. This light is used to attract mates, lure prey, or scare off predators in the pitch-black abyss.</p>
                </div>
                <p class="mt-2 text-slate-700"><b>Coral Reefs:</b> Often called the "rainforests of the sea," these are highly biodiverse ecosystems found in warm, shallow waters. The coral itself is a living organism with a special relationship with algae, providing habitat and food for about 25% of all marine species. Coral reefs are primarily located in the tropics and subtropics because they need warm, shallow, and clear water with plenty of sunlight to thrive.  The most famous example is the Great Barrier Reef in Australia.</p>
                <p class="mt-2 text-slate-700">The unique foundation of a coral reef is the <i>coral polyp</i>, a tiny invertebrate animal. These polyps live in a symbiotic relationship with microscopic algae called <i>zooxanthellae</i>. The coral provides a protected home for the algae, and in return, the algae use photosynthesis to produce energy-rich sugars that feed the coral. This relationship is crucial for the coral's survival and growth.</p>
                <p class="mt-2 text-slate-700">Over time, as coral polyps grow and die, they secrete a hard, stony skeleton made of <i>calcium carbonate</i>. These skeletons accumulate and fuse together, building the massive, three-dimensional structures that form the reef. This complex habitat provides countless nooks and crannies that serve as shelter, nurseries, and hunting grounds for a staggering variety of marine organisms. The reef's structure can protect coastlines from erosion and provide a safe harbor for marine life to flourish.</p>
                <p class="mt-2 text-slate-700">The term "rainforest of the sea" is a powerful metaphor used to describe the incredible biodiversity of coral reefs. Like their terrestrial counterparts, these ecosystems support a disproportionately high number of species. While they occupy less than 1% of the ocean floor, they are home to about 25% of all known marine species, including thousands of fish, invertebrate, and plant species. This immense variety and productivity make them vital to the health of the global ocean and the economies of coastal communities that depend on them for tourism and fisheries.</p>
            </section>
            
            <section class="mb-8">
                <h2 id="estuaries" class="text-2xl font-semibold text-cyan-700">Section 2.3: The Transition Zone: Estuaries</h2>
                <p class="mt-2 text-slate-700">An estuary is a unique and highly productive coastal body of water where freshwater from rivers and streams mixes with salt water from the ocean. This creates a challenging and dynamic environment with fluctuating salinity, temperature, and depth. Organisms in estuaries, such as crabs, oysters, and many species of fish, must be highly adaptable to these conditions.</p>
                
                <h4 id="key-characteristics-of-an-estuary" class="text-md font-bold text-slate-700 mt-4">Key Characteristics of an Estuary</h4>
                <p class="mt-2 text-slate-700">The defining characteristic of an estuary is the presence of <b>brackish water</b>, a mixture of freshwater and saltwater. The salinity of an estuary can fluctuate daily with the tides, which makes it a challenging and dynamic environment for the organisms that live there.</p>
                <p class="mt-2 text-slate-700">Estuaries are known for their <b>high productivity</b>. The mixing of nutrient-rich freshwater runoff from land with nutrient-rich saltwater from the ocean creates an ideal environment for algae and other producers, which in turn support a complex food web.</p>
                <p class="mt-2 text-slate-700">Due to their high productivity and sheltered nature, estuaries serve as a critical <b>nursery habitat</b>. Many commercially important fish and shellfish species, such as shrimp, crabs, and flounder, use estuaries as breeding grounds and as a protected place for their young to grow before moving to the open ocean.</p>
            </section>

            <section class="mb-8">
                <h2 id="the-south-saskatchewan-river-watershed" class="text-2xl font-semibold text-cyan-700">Section 2.4: The Importance of a Watershed: A Case Study of the South Saskatchewan River Watershed</h2>
                <p class="mt-2 text-slate-700">A <b>watershed</b> is a land area that channels rainfall and snowmelt to creeks, streams, and rivers, and eventually to outflow points such as reservoirs, bays, and the ocean. Every landmass on Earth, no matter how small, is part of a watershed. The health of a watershed directly impacts the health of the aquatic ecosystems within it. To illustrate this concept on a large scale, we can examine the <b>South Saskatchewan River watershed</b>. It is an immense system that drains a vast area of the Canadian prairies, with its headwaters in the Rocky Mountains of Alberta and its lower reaches extending into Saskatchewan and Manitoba.</p>
                <p class="mt-2 text-slate-700">The watershed is a critical resource for millions of people and a key driver of the regional economy, providing water for drinking, agriculture, industry, and hydroelectric power. However, its health is under constant threat from various human activities.</p>
                <p class="mt-2 text-slate-700">To truly understand the interconnectedness of this system, consider the journey of water from Okotoks, Alberta, to Eatonia, Saskatchewan. Runoff from the foothills around Okotoks feeds into the Sheep River, which then flows into the Highwood River and eventually into the Bow River. The Bow River then joins the Oldman River to form the South Saskatchewan River. The water continues its long journey eastward, passing through many communities, before reaching places like Eatonia. This illustrates how the quality of water in Eatonia is directly influenced by the activities of upstream communities, industries, and agricultural operations in Alberta, underscoring the vital, shared nature of the watershed.</p>
                <ul class="list-disc list-inside mt-2 space-y-1">
                    <li><b>Agricultural Runoff:</b> The prairie region is dominated by agriculture. Runoff from farms carries fertilizers and pesticides into local streams and rivers. This can lead to a phenomenon known as <i>eutrophication</i>, where excess nutrients cause algal blooms that can deplete dissolved oxygen and harm aquatic life.</li>
                    <li><b>Urban and Industrial Impacts:</b> Major cities like Calgary, Medicine Hat, and Saskatoon are located within the watershed. Municipal and industrial wastewater discharges, even when treated, can introduce pollutants into the river system.</li>
                    <li><b>Climate Change:</b> The watershed's primary water source is snowmelt from the Rocky Mountains. Climate change threatens this supply, leading to less predictable runoff, more frequent floods or droughts, and warmer water temperatures that can stress aquatic species.</li>
                </ul>
            </section>

            <section class="mb-8">
                <h2 id="riparian-zones" class="text-2xl font-semibold text-cyan-700">Section 2.5: The 8 Key Ecological Functions of Riparian Zones</h2>
                <p class="mt-2 text-slate-700">A <b>riparian zone</b> is the area of land that runs along the banks of a river, stream, lake, or wetland. These zones act as a critical transition between the aquatic environment and the surrounding upland landscape. On the Canadian prairies, where a vast, open landscape is the norm, these green corridors are exceptionally important for both biodiversity and water quality. While they are often the only forested or heavily vegetated areas for miles, they provide essential habitat for wildlife and act as a natural filter for the prairie ecosystem. The health of a riparian zone is directly linked to the health of the water body it borders, and its functions are vital for a healthy, balanced ecosystem.</p>
                
                <div class="flex flex-col items-center mt-8">
                    <h4 id="table-of-riparian-zone-functions" class="text-xl font-semibold text-slate-800 mb-4">Table of Riparian Zone Functions</h4>
                    <div class="w-full overflow-x-auto">
                        <table class="min-w-full bg-white rounded-lg shadow-md border border-gray-200 striped-table">
                            <thead>
                                <tr class="bg-cyan-50 text-slate-600 uppercase text-sm leading-normal">
                                    <th class="py-3 px-6 text-left">Function</th>
                                    <th class="py-3 px-6 text-left">Description</th>
                                </tr>
                            </thead>
                            <tbody class="text-slate-700 text-sm font-light">
                                <tr class="border-b border-gray-200 hover:bg-cyan-100">
                                    <td class="py-3 px-6 text-left whitespace-nowrap font-medium">Water Filtration</td>
                                    <td class="py-3 px-6 text-left">The dense, complex root systems of riparian vegetation act as natural filters, trapping sediment, nutrients, and pollutants like pesticides from surface runoff before they can enter the adjacent water body. This filtering process prevents sediment from smothering fish spawning beds and prevents nutrient pollution from causing harmful algal blooms.</td>
                                </tr>
                                <tr class="border-b border-gray-200 hover:bg-cyan-100">
                                    <td class="py-3 px-6 text-left whitespace-nowrap font-medium">Bank Stabilization</td>
                                    <td class="py-3 px-6 text-left">The extensive root networks of riparian plants bind soil together, which stabilizes stream and river banks and protects them from erosion. By holding the soil in place, this function helps maintain the natural shape of the channel and reduces sediment entering the water.</td>
                                </tr>
                                <tr class="border-b border-gray-200 hover:bg-cyan-100">
                                    <td class="py-3 px-6 text-left whitespace-nowrap font-medium">Flood Control</td>
                                    <td class="py-3 px-6 text-left">During periods of heavy rainfall or snowmelt, riparian zones act as natural sponges that absorb and store excess water. The vegetation reduces the velocity of floodwaters, decreases downstream flood risk, and minimizes soil erosion.</td>
                                </tr>
                                <tr class="border-b border-gray-200 hover:bg-cyan-100">
                                    <td class="py-3 px-6 text-left whitespace-nowrap font-medium">Temperature Regulation</td>
                                    <td class="py-3 px-6 text-left">Overhanging trees and shrubs provide shade over water bodies, which helps regulate water temperature. By keeping water cooler, the vegetation increases the amount of dissolved oxygen available for aquatic life, which is crucial for the survival of many fish and invertebrate species.</td>
                                </tr>
                                <tr class="border-b border-gray-200 hover:bg-cyan-100">
                                    <td class="py-3 px-6 text-left whitespace-nowrap font-medium">Biodiversity and Habitat Support</td>
                                    <td class="py-3 px-6 text-left">As transitional areas between aquatic and terrestrial ecosystems, riparian zones are hotspots for biodiversity. They offer food, shelter, migration corridors, and breeding and rearing grounds for a wide variety of species, including fish, amphibians, birds, and mammals.</td>
                                </tr>
                                <tr class="border-b border-gray-200 hover:bg-cyan-100">
                                    <td class="py-3 px-6 text-left whitespace-nowrap font-medium">Groundwater Recharge</td>
                                    <td class="py-3 px-6 text-left">Riparian vegetation slows the flow of surface water, allowing it more time to seep into the soil and replenish underground water reserves. This groundwater can then seep back into streams during dry periods, helping to maintain a consistent flow.</td>
                                </tr>
                                <tr class="border-b border-gray-200 hover:bg-cyan-100">
                                    <td class="py-3 px-6 text-left whitespace-nowrap font-medium">Support for Aquatic Food Webs</td>
                                    <td class="py-3 px-6 text-left">Riparian vegetation supplies streams and rivers with organic matter, such as fallen leaves, branches, and woody debris. This material is a vital food source for aquatic invertebrates, forming the base of a critical food web.</td>
                                </tr>
                                <tr class="hover:bg-cyan-100">
                                    <td class="py-3 px-6 text-left whitespace-now-wrap font-medium">Nutrient Cycling</td>
                                    <td class="py-3 px-6 text-left">Riparian zones facilitate the cycling of nutrients, particularly nitrogen and phosphorus. The vegetation and microorganisms within the soil can absorb and process excess nutrients from runoff, preventing their accumulation in the water body where they can cause harmful algal blooms and anoxic conditions.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <section class="mb-8">
                <h2 id="attributions" class="text-2xl font-semibold text-cyan-700">Attributions</h2>
                <ul class="list-disc list-inside mt-2 space-y-2">
                    <li><b>Video:</b> "What are Plankton, Nekton & Benthos?" by The Marine Diaries. Sourced from YouTube: <a href="https://www.youtube.com/embed/4cguoY4qTXA" class="text-blue-600 hover:text-blue-800 underline">https://www.youtube.com/embed/4cguoY4qTXA</a></li>
                    <li><b>Video:</b> "Types of Freshwater Ecosystems" by M.M. Ahamed. Sourced from YouTube: <a href="https://www.youtube.com/watch?v=SexLZIyo_FA" class="text-blue-600 hover:text-blue-800 underline">https://www.youtube.com/watch?v=SexLZIyo_FA</a></li>
                    <li><b>Image:</b> Diagram illustrating the different zones of a lake. Sourced from Kasco Marine: <a href="https://kascomarine.com/wp-content/uploads/C9_fig_9.3-aquatic-science-texas.jpg" class="text-blue-600 hover:text-blue-800 underline">https://kascomarine.com/wp-content/uploads/C9_fig_9.3-aquatic-science-texas.jpg</a></li>
                    <li><b>Image:</b> A conceptual diagram of the River Continuum Concept. Sourced from Minnesota State Pressbooks: <a href="https://minnstate.pressbooks.pub/app/uploads/sites/87/2023/12/river-zones-768x558.png" class="text-blue-600 hover:text-blue-800 underline">https://minnstate.pressbooks.pub/app/uploads/sites/87/2023/12/river-zones-768x558.png</a></li>
                    <li><b>Image:</b> A visual representation of the four main types of freshwater wetlands. Sourced from World Rivers: <a href="https://worldrivers.net/wp-content/uploads/2025/06/wetland-types-1-1024x683.jpg" class="text-blue-600 hover:text-blue-800 underline">https://worldrivers.net/wp-content/uploads/2025/06/wetland-types-1-1024x683.jpg</a></li>
                    <li><b>Image:</b> A diagram illustrating the complex food web in an oceanic ecosystem. Sourced from Wikimedia Commons: <a href="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e9/Oceanic_Food_Web.jpg/1024px-Oceanic_Food_Web.jpg" class="text-blue-600 hover:text-blue-800 underline">https://upload.wikimedia.org/wikipedia/commons/thumb/e/e9/Oceanic_Food_Web.jpg/1024px-Oceanic_Food_Web.jpg</a></li>
                </ul>
            </section>
        </div>
    </div>
    
    <!-- Modal HTML -->
    <!-- The `style="display: none;"` attribute ensures the modal is hidden immediately on page load,
         preventing any brief flash of content before the CSS is applied. -->
    <div id="quiz-modal" class="modal fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50 overflow-y-auto" style="display: none;">
        <div class="bg-white rounded-xl shadow-xl p-8 max-w-lg w-full transform transition-transform duration-300 scale-100 my-8">
            <div class="flex justify-between items-center border-b pb-3 mb-4">
                <h3 class="text-xl font-bold text-slate-800">Freshwater Ecosystems Quiz</h3>
                <button id="close-button" class="text-slate-500 hover:text-slate-700 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            
            <form id="quiz-form">
                <!-- Quiz questions will be dynamically inserted here by JavaScript -->
            </form>

            <div id="results" class="mt-4 text-center hidden">
                <h4 class="text-2xl font-bold text-slate-900 mb-2">Quiz Results</h4>
                <p id="score-text" class="text-lg text-slate-700"></p>
                <p id="feedback-text" class="text-sm text-slate-500 mt-2"></p>
                <button id="retake-quiz" class="mt-4 bg-cyan-600 hover:bg-cyan-700 text-white font-semibold py-2 px-4 rounded-lg shadow transition-colors">Retake Quiz</button>
            </div>
        </div>
    </div>

    <!-- JavaScript to handle the quiz logic -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const quizButton = document.getElementById('quiz-button');
            const quizModal = document.getElementById('quiz-modal');
            const closeButton = document.getElementById('close-button');
            const quizForm = document.getElementById('quiz-form');
            const resultsDiv = document.getElementById('results');
            const scoreText = document.getElementById('score-text');
            const feedbackText = document.getElementById('feedback-text');
            const retakeButton = document.getElementById('retake-quiz');
            
            const searchInput = document.getElementById('search-input');
            const searchButton = document.getElementById('search-button');
            const contentArea = document.getElementById('content-area');
            const originalContent = contentArea.innerHTML;

            let currentQuestionIndex = 0;
            let userAnswers = [];

            // Array of quiz questions
            const quizQuestions = [
                {
                    question: "What is the primary characteristic that distinguishes freshwater from marine ecosystems?",
                    options: ["Temperature", "Salinity", "Depth", "Oxygen levels"],
                    answer: "Salinity"
                },
                {
                    question: "Lakes and ponds are examples of what type of freshwater ecosystem?",
                    options: ["Lotic", "Brackish", "Lentic", "Estuarine"],
                    answer: "Lentic"
                },
                {
                    question: "Which of the following is NOT one of the three light zones of a lake?",
                    options: ["Littoral zone", "Limnetic zone", "Profundal zone", "Epilimnion zone"],
                    answer: "Epilimnion zone"
                },
                {
                    question: "The layer of a lake with a sharp and rapid drop in temperature is called the:",
                    options: ["Epilimnion", "Hypolimnion", "Metalimnion", "Littoral zone"],
                    answer: "Metalimnion"
                },
                {
                    question: "Which river zone is typically cold, clear, fast-flowing, and highly oxygenated?",
                    options: ["Source Zone", "Transitional Zone", "Floodplain Zone", "Estuary Zone"],
                    answer: "Source Zone"
                },
                {
                    question: "What is a wetland characterized by acidic, nutrient-poor conditions and a thick layer of peat?",
                    options: ["Marsh", "Swamp", "Bog", "Fen"],
                    answer: "Bog"
                },
                {
                    question: "A forested wetland dominated by trees and shrubs is known as a:",
                    options: ["Marsh", "Swamp", "Bog", "Fen"],
                    answer: "Swamp"
                },
                {
                    question: "The process where excess nutrients cause algal blooms is called:",
                    options: ["Photosynthesis", "Erosion", "Eutrophication", "Stratification"],
                    answer: "Eutrophication"
                },
                {
                    question: "Which of the following is NOT a function of a riparian zone?",
                    options: ["Water filtration", "Bank stabilization", "Providing a habitat for deep-sea fish", "Flood control"],
                    answer: "Providing a habitat for deep-sea fish"
                },
                {
                    question: "Riparian vegetation helps regulate water temperature by providing:",
                    options: ["Nutrients", "Sunlight", "Shade", "Salt"],
                    answer: "Shade"
                }
            ];

            function renderQuestion() {
                const q = quizQuestions[currentQuestionIndex];
                quizForm.innerHTML = ''; // Clear previous content

                const questionDiv = document.createElement('div');
                questionDiv.className = 'mb-4';
                
                const questionText = document.createElement('p');
                questionText.className = 'text-slate-800 font-semibold mb-2';
                questionText.textContent = `${currentQuestionIndex + 1}. ${q.question}`;
                questionDiv.appendChild(questionText);

                const optionsDiv = document.createElement('div');
                q.options.forEach(option => {
                    const optionLabel = document.createElement('label');
                    optionLabel.className = 'block text-slate-700 cursor-pointer hover:bg-slate-100 p-2 rounded-md transition-colors';
                    
                    const input = document.createElement('input');
                    input.type = 'radio';
                    input.name = `question${currentQuestionIndex}`;
                    input.value = option;
                    input.className = 'mr-2';
                    
                    optionLabel.appendChild(input);
                    optionLabel.appendChild(document.createTextNode(option));
                    optionsDiv.appendChild(optionLabel);
                });
                questionDiv.appendChild(optionsDiv);
                quizForm.appendChild(questionDiv);

                const button = document.createElement('button');
                button.type = 'button';
                button.className = 'w-full bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-colors';
                button.textContent = (currentQuestionIndex < quizQuestions.length - 1) ? 'Next Question' : 'Submit Answers';
                button.addEventListener('click', handleNext);
                quizForm.appendChild(button);

                quizForm.classList.remove('hidden');
                resultsDiv.classList.add('hidden');
            }
            
            function handleNext() {
                const selectedOption = document.querySelector(`input[name="question${currentQuestionIndex}"]:checked`);
                if (!selectedOption) {
                    showCustomMessage("Please select an answer before moving on.");
                    return;
                }
                userAnswers[currentQuestionIndex] = selectedOption.value;

                if (currentQuestionIndex < quizQuestions.length - 1) {
                    currentQuestionIndex++;
                    renderQuestion();
                } else {
                    calculateScore();
                }
            }

            function calculateScore() {
                let score = 0;
                quizQuestions.forEach((q, index) => {
                    if (userAnswers[index] === q.answer) {
                        score++;
                    }
                });

                const totalQuestions = quizQuestions.length;
                const percentage = (score / totalQuestions) * 100;
                
                let feedback = '';
                if (percentage === 100) {
                    feedback = "Excellent! You are a master of aquatic ecosystems.";
                } else if (percentage >= 70) {
                    feedback = "Great job! You have a solid understanding of the material.";
                } else if (percentage >= 50) {
                    feedback = "You're getting there! Review the concepts and try again.";
                } else {
                    feedback = "Keep studying! A quick review will help a lot.";
                }

                scoreText.textContent = `You scored ${score} out of ${totalQuestions} (${percentage.toFixed(0)}%).`;
                feedbackText.textContent = feedback;
                
                quizForm.classList.add('hidden');
                resultsDiv.classList.remove('hidden');
            }

            function showCustomMessage(message) {
                // A simple way to show a message box within the modal
                const messageDiv = document.createElement('div');
                messageDiv.className = "fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50";
                messageDiv.innerHTML = `
                    <div class="bg-white rounded-xl shadow-xl p-6 max-w-sm w-full text-center">
                        <p class="text-slate-800 mb-4">${message}</p>
                        <button class="bg-cyan-600 hover:bg-cyan-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors" onclick="this.parentNode.parentNode.remove()">OK</button>
                    </div>
                `;
                document.body.appendChild(messageDiv);
            }

            function performSearch() {
                const query = searchInput.value.trim();
                if (query === '') {
                    // Remove all highlights if the search bar is empty
                    removeHighlights();
                    return;
                }
                
                removeHighlights();
                
                const regex = new RegExp(query, 'gi');
                let matches = [...contentArea.innerHTML.matchAll(regex)];

                if (matches.length > 0) {
                    // Use a temporary div to avoid re-parsing the DOM multiple times
                    const tempDiv = document.createElement('div');
                    tempDiv.innerHTML = contentArea.innerHTML;
                    
                    let html = tempDiv.innerHTML;
                    let offset = 0;
                    
                    // Replace text with highlighted span, but only within non-highlighted areas
                    html = html.replace(regex, (match, index) => {
                        return `<span class="highlight">${match}</span>`;
                    });

                    contentArea.innerHTML = html;

                    // Scroll to the first highlighted element
                    const firstHighlight = document.querySelector('.highlight');
                    if (firstHighlight) {
                        firstHighlight.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                } else {
                    showCustomMessage(`No results found for "${query}".`);
                }
            }
            
            function removeHighlights() {
                let highlightedElements = document.querySelectorAll('.highlight');
                highlightedElements.forEach(el => {
                    const parent = el.parentNode;
                    // Replace the span with its inner text
                    parent.replaceChild(document.createTextNode(el.textContent), el);
                });
                // After removing all highlights, re-insert the original content. This prevents issues with subsequent searches.
                contentArea.innerHTML = originalContent;
            }

            // Event Listeners
            quizButton.addEventListener('click', () => {
                currentQuestionIndex = 0;
                userAnswers = [];
                renderQuestion();
                quizModal.style.display = 'flex';
            });

            closeButton.addEventListener('click', () => {
                quizModal.style.display = 'none';
            });

            retakeButton.addEventListener('click', () => {
                currentQuestionIndex = 0;
                userAnswers = [];
                renderQuestion();
            });
            
            searchButton.addEventListener('click', performSearch);
            searchInput.addEventListener('keydown', (event) => {
                if (event.key === 'Enter') {
                    performSearch();
                }
            });
        });
    </script>

</body>
</html>
